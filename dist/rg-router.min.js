"use strict";(function(){var t=[];var e=function o(e){return t.find(function(t){if(t.name==e)return t})};var r=function a(e){return t.find(function(t){if(t.url==e)return t})};var n=function u(t){if(t.state)i.go(t.state.name,true)};var i={add:function f(r){if(!r||!r.name){throw"Please specify a state name";return}var n=e(r);if(n)n=r;else t.push(r);i.trigger("add")},remove:function s(e){var r=undefined;t=t.filter(function(t){if(t.name!=e)return t;else r=t});i.trigger("remove",r)},go:function c(t,r){if(!i.active||!t)return;var n=e(t);if(!n){throw"State '"+t+"' has not been configured";return}var o=t.split(".");o=o.map(function(t,e){if(e>0){return o.slice(0,e).join(".")+"."+t}else{return t}});o.forEach(function(t,r){if(r<o.length){var i=e(t);n=Object.assign({},n,i)}});if(typeof history.pushState!="undefined"&&n.history!=false){if(!history.state||history.state.name!=n.name&&!r){var a=n.url?"#/"+n.url:null;history.pushState(n,null,a)}}i.current=n;i.trigger("go",n)},start:function d(){if(window.location.hash){var t=r(window.location.hash.replace("#/",""));if(t)i.go(t.name)}window.addEventListener("popstate",n);i.active=true;i.trigger("start")},stop:function g(){window.addEventListener("popstate",n);i.active=false;i.trigger("stop")},current:undefined,active:true};riot.observable(i);riot.mixin("rg.router",{init:function l(){this.router.on("go",this.update)},router:i});if(!window.rg)window.rg={};window.rg.router=i})();