"use strict";(function(){var t=[];var e=function i(e){return t.find(function(t){if(t.name==e)return t})};var r=function o(t){if(t.state)n.go(t.state.name,true)};var n={add:function s(r){var i=e(r);if(i)i=r;else t.push(r);n.trigger("add")},remove:function a(e){var r=undefined;t=t.filter(function(t){if(t.name!=e)return t;else r=t});n.trigger("remove",r)},go:function u(t,r){if(!n.active||!t)return;var i=e(t);if(!i){console.error("State '"+t+"' has not been configured");return}if(i.opts==null)n.opts={};else n.opts=Object.assign({},n.opts,i.opts);if(typeof history.pushState!="undefined"){if(!history.state||history.state.name!=i.name&&!r){var o=i.url?"#/"+i.url:null;history.pushState(i,null,o)}}n.current=i;n.trigger("go",i)},start:function f(){window.addEventListener("popstate",r);n.active=true;n.trigger("start")},stop:function c(){window.addEventListener("popstate",r);n.active=false;n.trigger("stop")},opts:{},current:undefined,active:true};riot.observable(n);riot.mixin("rg.router",{init:function d(){this.router.on("go",this.update)},router:n});n.start()})();