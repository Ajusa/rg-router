"use strict";(function(){var t={};var e=[];var r=function o(t){return e.find(function(e){if(e.name==t)return e})};var n=function a(t){if(t.state)i.go(t.state.name,true)};var i={add:function u(t){var n=r(t);if(n)n=t;else e.push(t);i.trigger("add")},remove:function s(t){var r=undefined;e=e.filter(function(e){if(e.name!=t)return e;else r=e});i.trigger("remove",r)},go:function f(t,e){if(!i.active||!t)return;var n=r(t);if(!n){console.error("State '"+t+"' has not been configured");return}if(typeof history.pushState!="undefined"){if(history.state.name!=n.name&&!e){var o=n.url?"#/"+n.url:null;history.pushState(n,null,o)}}i.current=n;i.trigger("go",n)},start:function c(){window.addEventListener("popstate",n);i.active=true;i.trigger("start")},stop:function d(){window.addEventListener("popstate",n);i.active=false;i.trigger("stop")},current:undefined,active:true};riot.observable(i);riot.mixin("rg.router",{init:function v(){this.router.on("go",this.update)},router:i});i.start()})();