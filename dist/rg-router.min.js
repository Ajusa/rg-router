"use strict";(function(){var t=[];var e=function i(e){return t.find(function(t){if(t.name==e)return t})};var r=function a(t){if(t.state)n.go(t.state.name,true)};var n={add:function o(r){if(!r||!r.name){throw"Please specify a state name";return}var i=e(r);if(i)i=r;else t.push(r);n.trigger("add")},remove:function u(e){var r=undefined;t=t.filter(function(t){if(t.name!=e)return t;else r=t});n.trigger("remove",r)},go:function s(t,r){if(!n.active||!t)return;var i=e(t);if(!i){throw"State '"+t+"' has not been configured";return}if(typeof history.pushState!="undefined"){if(!history.state||history.state.name!=i.name&&!r){var a=i.url?"#/"+i.url:null;history.pushState(i,null,a)}}n.current=i;n.trigger("go",i)},start:function f(){window.addEventListener("popstate",r);n.active=true;n.trigger("start")},stop:function c(){window.addEventListener("popstate",r);n.active=false;n.trigger("stop")},current:undefined,active:true};riot.observable(n);riot.mixin("rg.router",{init:function d(){this.router.on("go",this.update)},router:n});n.start()})();