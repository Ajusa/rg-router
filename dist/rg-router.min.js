"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};(function(){var t=[];var e=function a(e){return t.find(function(t){if(t.name==e)return t})};var r=function u(e){return t.find(function(t){if(t.url==e)return t})};var n=function f(t){if(t.state)o.go(t.state,true)};var i=function s(t,e){if(typeof history.pushState!="undefined"&&t.history!=false){if(!history.state||history.state.name!=t.name&&!e){var r=t.url?"#!/"+t.url:null;history.pushState(t.name,null,r)}}var n=_extends({},o.current);o.current=t;o.trigger("go",t,n)};var o={add:function c(r){if(!r||!r.name){throw"Please specify a state name";return}var n=e(r);if(n)n=r;else t.push(r);o.trigger("add",n)},remove:function v(e){var r=undefined;t=t.filter(function(t){if(t.name!=e)return t;else r=t});o.trigger("remove",r)},go:function d(t,r){if(!o.active||!t)return;var n=e(t);if(!n){throw"State '"+t+"' has not been configured";return}var a=t.split(".");a=a.map(function(t,e){if(e>0){return a.slice(0,e).join(".")+"."+t}else{return t}});a.forEach(function(t,r){if(r<a.length){var i=e(t);n=_extends({},n,i)}});if(typeof n.resolve=="function"){var u=n.resolve();if(typeof u.then=="function")u.then(function(){return i(n,r)})}else{i(n,r)}},start:function l(){o.active=true;if(window.location.hash){var t=r(window.location.hash.replace("#!/",""));if(t)o.go(t.name)}window.addEventListener("popstate",n);o.trigger("start")},stop:function g(){o.active=false;window.addEventListener("popstate",n);o.trigger("stop")},current:undefined,active:false};riot.observable(o);riot.mixin("rg.router",{init:function h(){var t=this;this.router.on("go",function(){return t.update()})},router:o});if(!window.rg)window.rg={};window.rg.router=o})();